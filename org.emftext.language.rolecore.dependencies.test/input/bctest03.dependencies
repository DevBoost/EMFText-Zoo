Graph Block

Domain blockDomain ModelPackage "http://www.emftext.org/language/rolecore/blockdomain"
		RCPackage "org.emftext.language.rolecore.examples/metamodel/blockDomain.rolecore"{
	Required {
		Block containerBlock (role BlockChildrenRole => block;)
	}
	SemiRequired {
		BlockDiagram blockDiagram (role BlockdiagramElementsRole => block;)
	}
	Create {
		Block block (
			role Name := "Block"; 
			role ModelelementBlockdiagramRole => blockDiagram;
			role ConnectableContainerRole => containerBlock;	
		)
	} 
}
Domain classDomain ModelPackage "http://www.emftext.org/language/rolecore/classdomain"
		RCPackage "org.emftext.language.rolecore.examples/metamodel/classDomain.rolecore"{
	Required {
		Class containerClass (role ClassRolesRole => containerRole;)
	}
	SemiRequired{
		ClassDiagram classDiagram (role ClassdiagramElementsRole => class;)
		Stereotype stereotype (role Name := "block";)
	}
	Create {
		Class class (
						role ModelelementClassdiagramRole => classDiagram; 
						role ModelelementStereotypeRole => stereotype;
					)
		ClassRole containerRole (
			role ClassroleClassRole => containerClass;
			role ClassroleSourceRole => containerChild;
			role ClassroleCardRole => containerCardinality;
		)
		Cardinality containerCardinality (role CardinalityCardRole => containerRole; role CardString := "1..1";)
		Association containerChild (role AssociationSourceRole => containerRole; role AssociationTargetRole => childRole;)
		ClassRole childRole (
			role ClassroleClassRole => class;
			role ClassroleTargetRole => containerChild;
			role ClassroleCardRole => childCardinality;
		)
		Cardinality childCardinality (role CardinalityCardRole => childRole; role CardString := "1..1";)
	}
}
Equivalences{
	containerBlock := containerClass;
	block := class, containerRole, childRole, containerCardinality, childCardinality, containerChild; 
	class role Name := block role Name; 
	classDiagram:=blockDiagram;
}