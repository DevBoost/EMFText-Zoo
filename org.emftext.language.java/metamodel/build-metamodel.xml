<project basedir="." default="generate-jamopp-metamodel" name="Build EMFText text resource">

	<target name="generate-jamopp-metamodel">

		<delete dir="../src-gen" includes="**/*.java" excludes=".svn"/>
		
		<copy todir="../src-gen">
			<fileset dir="../src-operations-impl/operations"/>
		</copy>
		
		<!-- correct package name -->
    	<replace dir="../src-gen" token="package operations.org." value="package org.">
		</replace>
		
		<eclipse.refreshLocal depth="infinite" resource="org.emftext.language.java"/>
		
		<emf.Ecore2Java 
			model="java.ecore" 
			genModel="java.genmodel" 
			generateeditproject="false" 
			generateeditorproject="false"
			modelProject="org.emftext.language.java" 
			modelProjectFragmentPath="src-gen"
			reconcileGenModel="keep"
		/>
		
		<eclipse.refreshLocal depth="infinite" resource="org.emftext.language.java"/>

	</target>
	
</project>